<?xml version="1.0" ?>

<!-- Specification of FAP environment for unit test ut_spec_creat -->

<!DOCTYPE  caeenv SYSTEM "/home/yborisov/projects/fap/git/fapws/src/objspec.dtd"> 

<caeenv>
    <iobject type="none" id="main_test">
	<mut node="self">
	    <add>
		<iobject type="none" id="generator" quiet="yes"> 
		    <mut node="self">
			<add>
			    <inp id="enable"/>

			    <out id="event"/>

			    <logspec  event="cre"> <logdata id="new"/> </logspec>

			    <state type="StBool" id="event" len="4" transf="trans_event" init="0"> 
				<logspec event="upd"> <logdata id="new"/> </logspec> 
				<inp id="self"/> <inp id="count"/> </state>

			    <state type="StUint32" id="count" len="4" transf="trans_count" init="0"> 
				<logspec event="upd"> <logdata id="cur"/> <logdata id="new"/> </logspec> 
				<inp id="self"/> <inp id="enable"/> <inp id="period"/>
			    </state>

			    <state type="StUint32" id="period" len="4" init="6"> 
				<logspec event="upd"> <logdata id="new"/> </logspec> </state>

			    <conn id="event.self" pair="event.output"/> 
			    <conn id="event.count" pair="count.output"/> 
			    <conn id="count.self" pair="count.output"/> 
			    <conn id="count.period" pair="period.output"/> 
			    <ext id="enable" pair="count.enable"/> 
			    <ext id="event" pair="event.output"/> 

			</add>
		    </mut>
		</iobject> <!-- generator -->

		<iobject type="generator" id="gen_1" />
		<iobject type="generator" id="gen_2" />

		<!-- Enable counting for the lowest count -->
		<state type="StBool" id="enable_count" len="4" init="1"></state>

		<conn id="gen_1.enable" pair="enable_count.output"/> 
		<conn id="gen_2.enable" pair="gen_1.event"/>
	    </add>
	</mut>
    </iobject> <!-- test -->
</caeenv>

