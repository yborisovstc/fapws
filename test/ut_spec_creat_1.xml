<?xml version="1.0" ?>

<!-- Specification of FAP environment for unit test ut_spec_creat -->

<!DOCTYPE  caeenv SYSTEM "/home/yborisov/projects/fap/git/fapws/src/objspec.dtd"> 

<caeenv>
    <object type="test" id="main_test">
	<object type="none" id="generator" quiet="yes"> 
	    
	    <inp id="enable"/>

	    <out id="event"/>

	    <logspec  event="cre"> <logdata id="new"/> </logspec>

	    <state type="StBool" id="event" len="4" access="Out" transf="trans_event" init="0"> 
		<logspec event="upd"> <logdata id="new"/> </logspec> 
		<inp id="self"/> <inp id="count"/> </state>

	    <state type="StUint32" id="count" len="4" access="Reg" transf="trans_count" init="0"> 
		<logspec event="upd"> <logdata id="cur"/> <logdata id="new"/> </logspec> 
		<inp id="self"/> <inp id="enable"/> <inp id="period"/>
	    </state>

	    <state type="StUint32" id="period" len="4" access="Inp" init="6"> 
		<logspec event="upd"> <logdata id="new"/> </logspec> </state>

	    <conn inp="event.self" out="event.output"/> 
	    <conn inp="event.count" out="count.output"/> 
	    <conn inp="count.self" out="count.output"/> 
	    <conn inp="count.period" out="period.output"/> 
	    <conn inp="count.enable" out="enable"/> 
	    <conn inp="event" out="event.output"/> 

	</object> <!-- generator -->

	<object type="generator" id="gen_1" />
	<object type="generator" id="gen_2" />

	<!-- Enable counting for the lowest count -->
	<state type="StBool" id="enable_count" len="4" access="Reg" init="1"></state>

	<conn inp="gen_1.enable" out="enable_count.output"/> 
	<conn inp="gen_2.enable" out="gen_1.event"/>
    </object> <!-- test -->
</caeenv>

